webpackJsonp([1],{0:function(n,l,t){n.exports=t("cDNt")},cDNt:function(n,l,t){"use strict";function e(){return{type:Y}}function o(){return{type:$}}function u(n){return{type:W,payload:n}}function r(){return{type:X}}function i(){return{type:Q}}function a(){return{type:nn}}function s(){return{type:ln}}function c(n){return _n._21(2,[(n()(),_n._19(null,["\n\t\t"])),(n()(),_n._4(0,null,null,0,"div",[],[[8,"className",0],[4,"width",null],[4,"height",null],[4,"left",null],[4,"top",null]],null,null,null,null)),(n()(),_n._19(null,["\n\t"]))],null,function(n,l){var t=l.component;n(l,1,0,_n._7(1,"","app-cell app-cell-"+t.cellClass,""),t.size+"px",t.size+"px",t.cell.column*(t.size-1)+"px",t.cell.row*(t.size-1)+"px")})}function p(n){return _n._21(0,[(n()(),_n._4(0,null,null,1,"app-cell",[],null,null,null,c,vn)),_n._2(49152,null,0,hn,[],null,null)],null,null)}function f(n){return bn._21(0,[(n()(),bn._4(0,null,null,1,"app-cell",[],null,null,null,c,vn)),bn._2(49152,null,0,hn,[],{cell:[0,"cell"],size:[1,"size"],isGhost:[2,"isGhost"]},null)],function(n,l){var t=l.component;n(l,1,0,l.context.$implicit,t.cellSize,t.isGhost)},null)}function m(n){return bn._21(2,[(n()(),bn._19(null,["\n\t\t"])),(n()(),bn.Y(16777216,null,null,1,null,f)),bn._2(802816,null,0,wn.d,[bn.N,bn.K,bn.t],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),(n()(),bn._19(null,["\n\t"]))],function(n,l){var t=l.component;n(l,2,0,t.cells,t.trackByFn)},null)}function h(n){return bn._21(0,[(n()(),bn._4(0,null,null,1,"app-tetromino",[],null,null,null,m,Mn)),bn._2(49152,null,0,gn,[],null,null)],null,null)}function _(n){return kn._21(0,[(n()(),kn._4(0,null,null,2,"app-cell",[],null,null,null,c,vn)),kn._2(49152,null,0,hn,[],{cell:[0,"cell"],size:[1,"size"]},null),(n()(),kn._19(null,["\n\t\t\t"]))],function(n,l){var t=l.component;n(l,1,0,l.context.$implicit,t.state.cellSize)},null)}function d(n){return kn._21(2,[(n()(),kn._19(null,["\n\t\t"])),(n()(),kn._4(0,null,null,12,"div",[["class","app-board"]],[[4,"width",null],[4,"height",null]],null,null,null,null)),(n()(),kn._19(null,["\n\t\t\t"])),(n()(),kn._4(0,null,null,2,"app-tetromino",[],null,null,null,m,Mn)),kn._2(49152,null,0,gn,[],{cells:[0,"cells"],cellSize:[1,"cellSize"],isGhost:[2,"isGhost"]},null),(n()(),kn._19(null,["\n\t\t\t"])),(n()(),kn._19(null,["\n\n\t\t\t"])),(n()(),kn.Y(16777216,null,null,1,null,_)),kn._2(802816,null,0,On.d,[kn.N,kn.K,kn.t],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),(n()(),kn._19(null,["\n\n\t\t\t"])),(n()(),kn._4(0,null,null,2,"app-tetromino",[],null,null,null,m,Mn)),kn._2(49152,null,0,gn,[],{cells:[0,"cells"],cellSize:[1,"cellSize"],isGhost:[2,"isGhost"]},null),(n()(),kn._19(null,["\n\t\t\t"])),(n()(),kn._19(null,["\n\t\t"])),(n()(),kn._19(null,["\n\t"]))],function(n,l){var t=l.component;n(l,4,0,t.state.ghostCells,t.state.cellSize,!0),n(l,8,0,t.state.unclearedCells,t.unclearedCellsTrackBy);n(l,11,0,null==t.state.activeTetromino?null:t.state.activeTetromino.cells,t.state.cellSize,!1)},function(n,l){var t=l.component;n(l,1,0,t.width+"px",t.height+"px")})}function v(n){return kn._21(0,[(n()(),kn._4(0,null,null,1,"app-board",[],null,[["document","keydown"]],function(n,l,t){var e=!0;if("document:keydown"===l){e=!1!==kn._16(n,1).onKeyUp(t)&&e}return e},d,Pn)),kn._2(49152,null,0,Tn,[],null,null)],null,null)}function g(n){return Nn._21(2,[(n()(),Nn._19(null,["\n\t\t"])),(n()(),Nn._4(0,null,null,7,"div",[["class","app-controls"]],null,null,null,null,null)),(n()(),Nn._19(null,["\n\t\t\t"])),(n()(),Nn._4(0,null,null,1,"button",[["type","button"]],null,[[null,"click"]],function(n,l,t){var e=!0,o=n.component;if("click"===l){e=!1!==o.newGameBtnClicked(t)&&e}return e},null,null)),(n()(),Nn._19(null,["New Game"])),(n()(),Nn._19(null,["\n\t\t\t"])),(n()(),Nn._4(0,null,null,1,"button",[["type","button"]],[[8,"disabled",0]],[[null,"click"]],function(n,l,t){var e=!0,o=n.component;if("click"===l){e=!1!==o.pauseBtnClicked(t)&&e}return e},null,null)),(n()(),Nn._19(null,["",""])),(n()(),Nn._19(null,["\n\t\t"])),(n()(),Nn._19(null,["\n\t"]))],null,function(n,l){var t=l.component;n(l,6,0,!t.isStarted||t.isFinished),n(l,7,0,t.isPaused?"Resume Game":"Pause Game")})}function b(n){return Nn._21(0,[(n()(),Nn._4(0,null,null,1,"app-controls",[],null,null,null,g,Fn)),Nn._2(49152,null,0,Ln,[],null,null)],null,null)}function w(n){var l=n.cells.map(function(n){return n.column}),t=Math.min.apply(Math,l);return Math.max.apply(Math,l)-t+1}function y(n,l,t){void 0===t&&(t=!0);var e=w(n),o=t?Math.floor((l-e)/2):(l-e)/2,u=n.cells.map(function(n){return zn({},n,{column:n.column+o})}),r=n.unrotatedCells.map(function(n){return zn({},n,{column:n.column+o})});return zn({},n,{cells:u,unrotatedCells:r})}function M(n,l,t,e,o){var u=l,r=t;if(l<0){var i=Math.min.apply(Math,n.cells.map(function(n){return n.column}));u=Math.max(-i,u)}else{var a=Math.max.apply(Math,n.cells.map(function(n){return n.column}));u=Math.min(o-a-1,u)}if(t<0){var s=Math.min.apply(Math,n.cells.map(function(n){return n.row}));r=Math.max(-s,r)}else{var c=Math.max.apply(Math,n.cells.map(function(n){return n.row}));r=Math.min(e-c-1,r)}return 0===u&&0===r?n:Dn({},n,{cells:n.cells.map(function(n){return Dn({},n,{row:n.row+r,column:n.column+u})}),unrotatedCells:n.unrotatedCells.map(function(n){return Dn({},n,{row:n.row+r,column:n.column+u})})})}function x(n){return Gn._21(2,[(n()(),Gn._19(null,["\n\t\t"])),(n()(),Gn._4(0,null,null,11,"div",[["class","app-next-tetromino-wrapper"]],[[4,"height",null]],null,null,null,null)),(n()(),Gn._19(null,["\n\t\t\t"])),(n()(),Gn._4(0,null,null,1,"div",[["class","app-next-tetromino-label"]],null,null,null,null,null)),(n()(),Gn._19(null,["Next Tetromino"])),(n()(),Gn._19(null,["\n\t\t\t"])),(n()(),Gn._4(0,null,null,5,"div",[["class","app-next-tetromino"]],[[4,"width",null],[4,"height",null],[4,"top",null]],null,null,null,null)),(n()(),Gn._19(null,["\n\t\t\t\t"])),(n()(),Gn._4(0,null,null,2,"app-tetromino",[],null,null,null,m,Mn)),Gn._2(49152,null,0,gn,[],{cells:[0,"cells"],cellSize:[1,"cellSize"],isGhost:[2,"isGhost"]},null),(n()(),Gn._19(null,["\n\t\t\t\t"])),(n()(),Gn._19(null,["\n\t\t\t"])),(n()(),Gn._19(null,["\n\t\t"])),(n()(),Gn._19(null,["\n\t"]))],function(n,l){var t=l.component;n(l,9,0,t.adjustTetrominoPosition(t.tetromino).cells,t.cellSize,!1)},function(n,l){var t=l.component;n(l,1,0,6*t.cellSize+"px"),n(l,6,0,3*t.cellSize+"px",4*t.cellSize+"px",.5*(4-t.rowSpan)*t.cellSize+"px")})}function T(n){return Gn._21(0,[(n()(),Gn._4(0,null,null,1,"app-next-tetromino",[],null,null,null,x,An)),Gn._2(49152,null,0,In,[],null,null)],null,null)}function k(n){return Bn._21(2,[(n()(),Bn._19(null,["\n\t\t"])),(n()(),Bn._4(0,null,null,28,"div",[["class","app-scoreboard"]],null,null,null,null,null)),(n()(),Bn._19(null,["\n\t\t\t"])),(n()(),Bn._4(0,null,null,7,"div",[["class","app-scoreboard-box app-scoreboard-box-score"]],null,null,null,null,null)),(n()(),Bn._19(null,["\n\t\t\t\t"])),(n()(),Bn._4(0,null,null,1,"div",[["class","app-scoreboard-box-label"]],null,null,null,null,null)),(n()(),Bn._19(null,["Score"])),(n()(),Bn._19(null,["\n\t\t\t\t"])),(n()(),Bn._4(0,null,null,1,"div",[["class","app-scoreboard-box-value"]],null,null,null,null,null)),(n()(),Bn._19(null,["",""])),(n()(),Bn._19(null,["\n\t\t\t"])),(n()(),Bn._19(null,["\n\t\t\t"])),(n()(),Bn._4(0,null,null,7,"div",[["class","app-scoreboard-box app-scoreboard-box-level"]],null,null,null,null,null)),(n()(),Bn._19(null,["\n\t\t\t\t"])),(n()(),Bn._4(0,null,null,1,"div",[["class","app-scoreboard-box-label"]],null,null,null,null,null)),(n()(),Bn._19(null,["Level"])),(n()(),Bn._19(null,["\n\t\t\t\t"])),(n()(),Bn._4(0,null,null,1,"div",[["class","app-scoreboard-box-value"]],null,null,null,null,null)),(n()(),Bn._19(null,["",""])),(n()(),Bn._19(null,["\n\t\t\t"])),(n()(),Bn._19(null,["\n\t\t\t"])),(n()(),Bn._4(0,null,null,7,"div",[["class","app-scoreboard-box app-scoreboard-box-lines"]],null,null,null,null,null)),(n()(),Bn._19(null,["\n\t\t\t\t"])),(n()(),Bn._4(0,null,null,1,"div",[["class","app-scoreboard-box-label"]],null,null,null,null,null)),(n()(),Bn._19(null,["Lines until next level"])),(n()(),Bn._19(null,["\n\t\t\t\t"])),(n()(),Bn._4(0,null,null,1,"div",[["class","app-scoreboard-box-value"]],null,null,null,null,null)),(n()(),Bn._19(null,["",""])),(n()(),Bn._19(null,["\n\t\t\t"])),(n()(),Bn._19(null,["\n\t\t"])),(n()(),Bn._19(null,["\n\t"]))],null,function(n,l){var t=l.component;n(l,9,0,t.score),n(l,18,0,t.level),n(l,27,0,t.lines)})}function O(n){return Bn._21(0,[(n()(),Bn._4(0,null,null,1,"app-scoreboard",[],null,null,null,k,Hn)),Bn._2(49152,null,0,En,[],null,null)],null,null)}function S(n){return Zn._21(0,[(n()(),Zn._4(0,null,null,20,"div",[["class","app-container"]],null,null,null,null,null)),(n()(),Zn._19(null,["\n\n\t\t\t\t"])),(n()(),Zn._4(0,null,null,2,"app-board",[],null,[[null,"onSoftDrop"],[null,"onHardDrop"],[null,"onMoveLeft"],[null,"onMoveRight"],[null,"onTogglePause"],[null,"onNewGame"],[null,"onRotate"],["document","keydown"]],function(n,l,t){var e=!0,o=n.component;if("document:keydown"===l){e=!1!==Zn._16(n,3).onKeyUp(t)&&e}if("onSoftDrop"===l){e=!1!==o.softDrop()&&e}if("onHardDrop"===l){e=!1!==o.hardDrop()&&e}if("onMoveLeft"===l){e=!1!==o.moveLeft()&&e}if("onMoveRight"===l){e=!1!==o.moveRight()&&e}if("onTogglePause"===l){e=!1!==o.togglePause()&&e}if("onNewGame"===l){e=!1!==o.newGame()&&e}if("onRotate"===l){e=!1!==o.rotate()&&e}return e},d,Pn)),Zn._2(49152,null,0,Tn,[],{state:[0,"state"]},{onMoveLeft:"onMoveLeft",onMoveRight:"onMoveRight",onSoftDrop:"onSoftDrop",onRotate:"onRotate",onHardDrop:"onHardDrop",onTogglePause:"onTogglePause",onNewGame:"onNewGame"}),(n()(),Zn._19(null,["\n\t\t\t\t"])),(n()(),Zn._19(null,["\n\n\t\t\t\t"])),(n()(),Zn._4(0,null,null,13,"div",[["class","app-side-panel"]],null,null,null,null,null)),(n()(),Zn._19(null,["\n\t\t\t\t\t"])),(n()(),Zn._4(0,null,null,2,"app-controls",[],null,[[null,"onNew"],[null,"onPause"]],function(n,l,t){var e=!0,o=n.component;if("onNew"===l){e=!1!==o.newGame()&&e}if("onPause"===l){e=!1!==o.togglePause()&&e}return e},g,Fn)),Zn._2(49152,null,0,Ln,[],{isStarted:[0,"isStarted"],isFinished:[1,"isFinished"],isTiming:[2,"isTiming"]},{onNew:"onNew",onPause:"onPause"}),(n()(),Zn._19(null,["\n\t\t\t\t\t"])),(n()(),Zn._19(null,["\n\n\t\t\t\t\t"])),(n()(),Zn._4(0,null,null,2,"app-next-tetromino",[],null,null,null,x,An)),Zn._2(49152,null,0,In,[],{tetromino:[0,"tetromino"],cellSize:[1,"cellSize"]},null),(n()(),Zn._19(null,["\n\t\t\t\t\t"])),(n()(),Zn._19(null,["\n\n\t\t\t\t\t"])),(n()(),Zn._4(0,null,null,2,"app-scoreboard",[],null,null,null,k,Hn)),Zn._2(49152,null,0,En,[],{lines:[0,"lines"],score:[1,"score"],level:[2,"level"]},null),(n()(),Zn._19(null,["\n\t\t\t\t\t"])),(n()(),Zn._19(null,["\n\t\t\t\t"])),(n()(),Zn._19(null,["\n\n\t\t\t"]))],function(n,l){n(l,3,0,l.context.ngIf),n(l,9,0,l.context.ngIf.isStarted,l.context.ngIf.isFinished,l.context.ngIf.isTiming),n(l,13,0,l.context.ngIf.nextTetromino,l.context.ngIf.cellSize),n(l,17,0,l.context.ngIf.linesUntilNextLevel,l.context.ngIf.score,l.context.ngIf.level)},null)}function P(n){return Zn._21(0,[(n()(),Zn._19(null,["\n\t\t"])),(n()(),Zn._4(0,null,null,8,"div",[["class","app"]],null,null,null,null,null)),(n()(),Zn._19(null,["\n\t\t\t"])),(n()(),Zn._4(0,null,null,1,"h1",[],null,null,null,null,null)),(n()(),Zn._19(null,["Angular + Redux Tetris"])),(n()(),Zn._19(null,["\n\t\t\t"])),(n()(),Zn.Y(16777216,null,null,2,null,S)),Zn._2(16384,null,0,Vn.e,[Zn.N,Zn.K],{ngIf:[0,"ngIf"]},null),Zn._17(131072,Vn.a,[Zn.g]),(n()(),Zn._19(null,["\n\t\t"])),(n()(),Zn._19(null,["\n\t"]))],function(n,l){var t=l.component;n(l,7,0,Zn._20(l,7,0,Zn._16(l,8).transform(t.state$)))},null)}function C(n){return Zn._21(0,[(n()(),Zn._4(0,null,null,1,"app-root",[],null,null,null,P,Jn)),Zn._2(4243456,null,0,mn,[qn.l,pn],null,null)],null,null)}function L(n,l,t){return{row:n,column:l,type:t}}function N(n){var l;switch(n){case q.O:l=[L(-2,0,n),L(-2,1,n),L(-1,0,n),L(-1,1,n)];break;case q.T:l=[L(-1,0,n),L(-1,1,n),L(-1,2,n),L(-2,1,n)];break;case q.I:l=[L(-4,0,n),L(-3,0,n),L(-2,0,n),L(-1,0,n)];break;case q.L:l=[L(-3,0,n),L(-2,0,n),L(-1,0,n),L(-1,1,n)];break;case q.J:l=[L(-3,1,n),L(-2,1,n),L(-1,1,n),L(-1,0,n)];break;case q.Z:l=[L(-2,0,n),L(-2,1,n),L(-1,1,n),L(-1,2,n)];break;case q.S:l=[L(-1,0,n),L(-1,1,n),L(-2,1,n),L(-2,2,n)];break;default:l=[]}return{type:n,orientation:$n.Normal,cells:l,unrotatedCells:l}}function R(){var n=Math.floor(Math.random()*Wn.length);return N(q[Wn[n]])}function F(n){return 100+50*Math.max(0,10-n)}function z(n,l){for(var t=!1,e=0,o=n.cells.length;e<o;e++){if("break"===function(e,o){var u=n.cells[e];if(l.filter(function(n){return n.row===u.row&&n.column===u.column}).length>0)return t=!0,"break"}(e))break}return t}function D(n,l,t){for(var e=t,o=n.cells.map(function(n){return n.column}),u=Math.min.apply(Math,o),r=Math.max.apply(Math,o),i=u;i<=r;i++){if("break"===function(o){var u=n.cells.filter(function(n){return n.column===o}),r=u.map(function(n){return n.row}),i=Math.max.apply(Math,r),a=l.filter(function(n){return n.column===o&&n.row>i}),s=a.length>0?Math.min.apply(Math,a.map(function(n){return n.row})):t;if(0===(e=Math.min(e,s-i-1)))return"break"}(i))break}return e}function I(n,l){var t=l.type===X,e=l.payload,o=n.numRows,u=n.numCols,r=n.linesPerLevel,i=n.unclearedCells,a=n.level,s=n.linesUntilNextLevel,c=n.isFinished,p=n.isTiming,f=n.nextTetromino,m=n.activeTetromino,h=n.score,_=n.combo,d=n.ghostCells,v=D(m,i,o);if(v>0&&(e||(h+=t?2*v:1),m=M(m,0,t?v:1,o,u),v=t?0:v),0===v){h+=m.cells.length;var g=m.cells.map(function(n){return n.row}),b=Math.min.apply(Math,g),w=Math.max.apply(Math,g);if(w<0)return Xn({},n,{isFinished:!0,isTiming:!1});i=i.concat(m.cells);for(var x=0,T=Math.max(0,b);T<=w;T++)!function(n){i.filter(function(l){return l.row===n}).length===u&&(i=i.filter(function(l){return l.row!==n}).map(function(l){return l.row<n?Xn({},l,{row:l.row+1}):l}),x+=1)}(T);if(x>0){switch(h+=50*_,_+=1,s-=x,x){case 4:h+=800*a;break;case 3:h+=500*a;break;case 2:h+=300*a;break;default:h+=100*a}s<=0&&(a+=1,s=r),0===i.length&&(h+=1200*a)}else _=0;var k=M(y(f,n.numCols),0,0,o,u);z(k,i)?(c=!0,p=!1):(m=k,f=R(),v=D(m,i,o),d=m.cells.map(function(n){return Xn({},n,{row:n.row+v})}))}else d=m.cells.map(function(n){return Xn({},n,{row:n.row+v-1})});return Xn({},n,{unclearedCells:i,linesUntilNextLevel:s,level:a,combo:_,interval:F(a),partialInterval:0,timestamp:Date.now(),ghostCells:d,activeTetromino:m,nextTetromino:f,isFinished:c,isTiming:p,score:h})}function G(n,l){for(var t=n.activeTetromino,e=n.numRows,o=n.numCols,u=n.ghostCells,r=n.unclearedCells,i=o,a=t.cells.map(function(n){return n.row}),s=Math.min.apply(Math,a),c=Math.max.apply(Math,a),p=s;p<=c;p++){if("break"===function(n){var l=t.cells.filter(function(l){return l.row===n}),e=l.map(function(n){return n.column}),o=Math.min.apply(Math,e),u=r.filter(function(l){return l.row===n&&l.column<o}),a=u.length>0?Math.max.apply(Math,u.map(function(n){return n.column})):-1;if(0===(i=Math.min(i,o-a-1)))return"break"}(p))break}if(i>0){var f=M(t,-1,0,e,o),m=D(f,r,e);return u=f.cells.map(function(n){return Qn({},n,{row:n.row+m})}),Qn({},n,{ghostCells:u,activeTetromino:f})}return n}function j(n,l){for(var t=n.activeTetromino,e=n.numRows,o=n.numCols,u=n.ghostCells,r=n.unclearedCells,i=o,a=t.cells.map(function(n){return n.row}),s=Math.min.apply(Math,a),c=Math.max.apply(Math,a),p=s;p<=c;p++){if("break"===function(n){var l=t.cells.filter(function(l){return l.row===n}),e=l.map(function(n){return n.column}),u=Math.max.apply(Math,e),a=r.filter(function(l){return l.row===n&&l.column>u}),s=a.length>0?Math.min.apply(Math,a.map(function(n){return n.column})):o;if(0===(i=Math.min(i,s-u-1)))return"break"}(p))break}if(i>0){var f=M(t,1,0,e,o),m=D(f,r,e);return u=f.cells.map(function(n){return nl({},n,{row:n.row+m})}),nl({},n,{ghostCells:u,activeTetromino:f})}return n}function A(n){if(0===n.length)return[];for(var l=[n[0]],t=1,e=n.length;t<e;t++)-1===l.indexOf(n[t])&&l.push(n[t]);return l}function E(n,l){var t,e,o=n.activeTetromino,u=n.unclearedCells,r=n.numCols,i=n.numRows,a=o.unrotatedCells,s=o.type,c=o.orientation,p=o.cells;switch(c){case $n.Normal:t=$n.FlippedLeft,e=-.5*Math.PI;break;case $n.FlippedLeft:t=$n.UpsideDown,e=-1*Math.PI;break;case $n.UpsideDown:t=$n.FlippedRight,e=-1.5*Math.PI;break;case $n.FlippedRight:t=$n.Normal,e=-2*Math.PI;break;default:t=c,e=0}if(s===q.O)return ll({},n,{activeTetromino:ll({},o,{orientation:t})});var f=U(a,s),m=Math.max.apply(Math,p.map(function(n){return n.row})),h=m===i-1;if(p=B(a,e,f),h){var _=m;m=Math.max.apply(Math,p.map(function(n){return n.row}));var d=_-m;d>0&&(p=p.map(function(n){return ll({},n,{row:n.row+d})}))}var v=p.map(function(n){return n.column}),g=Math.min.apply(Math,v),b=Math.max.apply(Math,v),w=0;g<0?w=-g:b>=r&&(w=r-b-1),0!==w&&(p=p.map(function(n){return ll({},n,{column:n.column+w})}));var y=p.map(function(n){return n.row}),M=Math.min.apply(Math,y);m=Math.max.apply(Math,y);for(var x=m-M+1,T=!1,k=M;k<=m;k++){if("break"===function(n){var l=A(p.filter(function(l){return l.row===n}).map(function(n){return n.column})),t=A(u.filter(function(l){return l.row===n}).map(function(n){return n.column})),e=l.concat(t);if(A(e).length<e.length)return T=!0,"break"}(k))break}var O;if(!T)for(O=0;O<x;O++){for(var S=g;S<=b;S++){var P=function(n){var l=A(p.filter(function(l){return l.column===n}).map(function(n){return n.row-O})),t=A(u.filter(function(l){return l.column===n}).map(function(n){return n.row})),e=l.concat(t);if(t.length>0&&(Math.max.apply(Math,l)>=i||A(e).length<e.length))return T=!0,"break";T=!1}(S);if("break"===P)break}if(!T){O>0&&(p=p.map(function(n){return ll({},n,{row:n.row-O})}));break}}if(T)return n;o={orientation:t,type:s,unrotatedCells:a,cells:p};var C=D(o,u,i),L=o.cells.map(function(n){return ll({},n,{row:n.row+C})});return ll({},n,{activeTetromino:o,ghostCells:L})}function B(n,l,t){var e=Math.cos(l),o=Math.sin(l);return n.map(function(n){var l=n.row-t[0],u=n.column-t[1],r=Math.ceil(.5*Math.round(2*(t[0]+e*l-o*u))),i=Math.floor(.5*Math.round(2*(t[1]+o*l+e*u)));return{type:n.type,row:r,column:i}})}function U(n,l){switch(l){case q.I:case q.Z:return[n[1].row+.5,n[1].column];case q.S:return[n[1].row-.5,n[1].column];case q.T:case q.L:case q.J:default:return[n[1].row,n[1].column]}}function H(n,l){var t=y(n.nextTetromino,n.numCols);return tl({},n,{isStarted:!0,isTiming:!0,partialInterval:0,timestamp:Date.now(),interval:F(1),isFinished:!1,level:1,linesUntilNextLevel:n.linesPerLevel,score:0,unclearedCells:[],activeTetromino:t,ghostCells:t.cells.map(function(l){return tl({},l,{row:l.row+n.numRows})}),nextTetromino:R()})}function Z(n,l){return n.isTiming?el({},n,{partialInterval:(n.partialInterval||n.interval)-(Date.now()-n.timestamp),isTiming:!1}):el({},n,{isTiming:!0,timestamp:Date.now()})}function V(n,l){switch(void 0===n&&(n=ol),l.type){case Y:return H(n,l);case $:return Z(n,l);case W:case X:return I(n,l);case Q:return G(n,l);case nn:return j(n,l);case ln:return E(n,l);default:return n}}Object.defineProperty(l,"__esModule",{value:!0});var q,K={production:!0},J=function(){function n(){}return n}(),Y="NEW_GAME",$="TOGGLE_PAUSE",W="SOFT_DROP",X="HARD_DROP",Q="MOVE_ACTIVE_TETROMINO_LEFT",nn="MOVE_ACTIVE_TETROMINO_RIGHT",ln="ROTATE_ACTIVE_TETROMINO",tn=t("ADVA"),en=t("bKpL"),on=(t.n(en),t("asHm")),un=(t.n(on),t("Pic8")),rn=(t.n(un),t("BdLl")),an=(t.n(rn),t("Lssd")),sn=(t.n(an),t("6DBm")),cn=(t.n(sn),t("q07K")),pn=(t.n(cn),function(){function n(n){this.store=n}return n.prototype.init=function(){var n=this,l=this.store.select(function(n){return n.tetris.isTiming}).partition(function(n){return n}),t=l[0],e=l[1],o=this.store.select(function(n){return n.tetris.partialInterval}),r=this.store.select(function(n){return n.tetris.interval});t.combineLatest(r,function(n,l){return l}).withLatestFrom(o).switchMap(function(n){var l=n[0],t=n[1];return en.Observable.timer(t,l).takeUntil(e)}).subscribe(function(){n.store.dispatch(u(!0))})},n.ctorParameters=function(){return[{type:tn.l}]},n}()),fn=t("ADVA"),mn=function(){function n(n,l){this.store=n,this.timer=l,this.state$=n.select(function(n){return n.tetris})}return n.prototype.ngAfterViewInit=function(){this.timer.init()},n.prototype.newGame=function(){this.store.dispatch(e())},n.prototype.togglePause=function(){this.store.dispatch(o())},n.prototype.softDrop=function(){this.store.dispatch(u(!1))},n.prototype.hardDrop=function(){this.store.dispatch(r())},n.prototype.moveLeft=function(){this.store.dispatch(i())},n.prototype.moveRight=function(){this.store.dispatch(a())},n.prototype.rotate=function(){this.store.dispatch(s())},n.ctorParameters=function(){return[{type:fn.l},{type:pn}]},n}(),hn=function(){function n(){}return Object.defineProperty(n.prototype,"cellClass",{get:function(){return this.isGhost?"ghost":this.cell.type},enumerable:!0,configurable:!0}),n}(),_n=t("/oeL"),dn=[],vn=_n._1({encapsulation:2,styles:dn,data:{}}),gn=(_n.Z("app-cell",hn,p,{cell:"cell",size:"size",isGhost:"isGhost"},{},[]),function(){function n(){}return n.prototype.trackByFn=function(n,l){return n},n}()),bn=t("/oeL"),wn=t("qbdv"),yn=[],Mn=bn._1({encapsulation:2,styles:yn,data:{}}),xn=(bn.Z("app-tetromino",gn,h,{cells:"cells",cellSize:"cellSize",isGhost:"isGhost"},{},[]),t("/oeL")),Tn=function(){function n(){this.onMoveLeft=new xn.m,this.onMoveRight=new xn.m,this.onSoftDrop=new xn.m,this.onRotate=new xn.m,this.onHardDrop=new xn.m,this.onTogglePause=new xn.m,this.onNewGame=new xn.m}return n.prototype.onKeyUp=function(n){if(78===n.keyCode)return void this.onNewGame.emit();if(80===n.keyCode&&this.state.isStarted&&!this.state.isFinished)return void this.onTogglePause.emit();if(this.state.isStarted&&!this.state.isFinished&&this.state.isTiming)switch(n.keyCode){case 37:this.onMoveLeft.emit();break;case 39:this.onMoveRight.emit();break;case 38:this.onRotate.emit();break;case 40:this.onSoftDrop.emit();break;case 32:this.onHardDrop.emit()}},Object.defineProperty(n.prototype,"width",{get:function(){return this.state.numCols*(this.state.cellSize-1)+1},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this.state.numRows*(this.state.cellSize-1)+1},enumerable:!0,configurable:!0}),n.prototype.unclearedCellsTrackBy=function(n){return n},n}(),kn=t("/oeL"),On=t("qbdv"),Sn=[],Pn=kn._1({encapsulation:2,styles:Sn,data:{}}),Cn=(kn.Z("app-board",Tn,v,{state:"state"},{onMoveLeft:"onMoveLeft",onMoveRight:"onMoveRight",onSoftDrop:"onSoftDrop",onRotate:"onRotate",onHardDrop:"onHardDrop",onTogglePause:"onTogglePause",onNewGame:"onNewGame"},[]),t("/oeL")),Ln=function(){function n(){this.onNew=new Cn.m,this.onPause=new Cn.m}return Object.defineProperty(n.prototype,"isPaused",{get:function(){return this.isStarted&&!this.isFinished&&!this.isTiming},enumerable:!0,configurable:!0}),n.prototype.pauseBtnClicked=function(n){this.onPause.emit(),n.target.blur()},n.prototype.newGameBtnClicked=function(n){this.onNew.emit(),n.target.blur()},n}(),Nn=t("/oeL"),Rn=[],Fn=Nn._1({encapsulation:2,styles:Rn,data:{}}),zn=(Nn.Z("app-controls",Ln,b,{isStarted:"isStarted",isFinished:"isFinished",isTiming:"isTiming"},{onNew:"onNew",onPause:"onPause"},[]),this&&this.__assign||Object.assign||function(n){for(var l,t=1,e=arguments.length;t<e;t++){l=arguments[t];for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&(n[o]=l[o])}return n}),Dn=this&&this.__assign||Object.assign||function(n){for(var l,t=1,e=arguments.length;t<e;t++){l=arguments[t];for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&(n[o]=l[o])}return n},In=function(){function n(){}return Object.defineProperty(n.prototype,"rowSpan",{get:function(){if(null===this.tetromino)return 0;var n=this.tetromino.cells.map(function(n){return n.row});return Math.max.apply(Math,n)-Math.min.apply(Math,n)+1},enumerable:!0,configurable:!0}),n.prototype.adjustTetrominoPosition=function(n){if(null===n)return n;var l=this.rowSpan;return M(y(n,3,!1),0,l,l,3)},n}(),Gn=t("/oeL"),jn=[],An=Gn._1({encapsulation:2,styles:jn,data:{}}),En=(Gn.Z("app-next-tetromino",In,T,{tetromino:"tetromino",cellSize:"cellSize"},{},[]),function(){function n(){}return n}()),Bn=t("/oeL"),Un=[],Hn=Bn._1({encapsulation:2,styles:Un,data:{}}),Zn=(Bn.Z("app-scoreboard",En,O,{lines:"lines",score:"score",level:"level"},{},[]),t("/oeL")),Vn=t("qbdv"),qn=t("ADVA"),Kn=[],Jn=Zn._1({encapsulation:2,styles:Kn,data:{}}),Yn=Zn.Z("app-root",mn,C,{},{},[]);!function(n){n.L="L",n.O="O",n.Z="Z",n.S="S",n.T="T",n.I="I",n.J="J"}(q||(q={}));var $n,Wn=Object.keys(q).filter(function(n){return isNaN(Number(n))});!function(n){n[n.Normal=0]="Normal",n[n.FlippedLeft=1]="FlippedLeft",n[n.UpsideDown=2]="UpsideDown",n[n.FlippedRight=3]="FlippedRight"}($n||($n={}));var Xn=this&&this.__assign||Object.assign||function(n){for(var l,t=1,e=arguments.length;t<e;t++){l=arguments[t];for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&(n[o]=l[o])}return n},Qn=this&&this.__assign||Object.assign||function(n){for(var l,t=1,e=arguments.length;t<e;t++){l=arguments[t];for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&(n[o]=l[o])}return n},nl=this&&this.__assign||Object.assign||function(n){for(var l,t=1,e=arguments.length;t<e;t++){l=arguments[t];for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&(n[o]=l[o])}return n},ll=this&&this.__assign||Object.assign||function(n){for(var l,t=1,e=arguments.length;t<e;t++){l=arguments[t];for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&(n[o]=l[o])}return n},tl=this&&this.__assign||Object.assign||function(n){for(var l,t=1,e=arguments.length;t<e;t++){l=arguments[t];for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&(n[o]=l[o])}return n},el=this&&this.__assign||Object.assign||function(n){for(var l,t=1,e=arguments.length;t<e;t++){l=arguments[t];for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&(n[o]=l[o])}return n},ol={numRows:20,numCols:10,cellSize:36,level:1,linesPerLevel:10,linesUntilNextLevel:10,activeTetromino:null,nextTetromino:R(),score:0,combo:0,unclearedCells:[],ghostCells:[],isStarted:!1,isFinished:!1,isTiming:!1,timestamp:0,interval:0,partialInterval:0},ul=t("/oeL"),rl=t("qbdv"),il=t("fc+i"),al=t("ADVA"),sl=ul._0(J,[mn],function(n){return ul._14([ul._15(512,ul.i,ul.W,[[8,[Yn]],[3,ul.i],ul.x]),ul._15(5120,ul.v,ul._13,[[3,ul.v]]),ul._15(4608,rl.g,rl.f,[ul.v]),ul._15(4608,ul.h,ul.h,[]),ul._15(5120,ul.a,ul._5,[]),ul._15(5120,ul.t,ul._11,[]),ul._15(5120,ul.u,ul._12,[]),ul._15(4608,il.b,il.s,[rl.c]),ul._15(6144,ul.H,null,[il.b]),ul._15(4608,il.e,il.f,[]),ul._15(5120,il.c,function(n,l,t,e){return[new il.k(n),new il.o(l),new il.n(t,e)]},[rl.c,rl.c,rl.c,il.e]),ul._15(4608,il.d,il.d,[il.c,ul.z]),ul._15(135680,il.m,il.m,[rl.c]),ul._15(4608,il.l,il.l,[il.d,il.m]),ul._15(6144,ul.F,null,[il.l]),ul._15(6144,il.p,null,[il.m]),ul._15(4608,ul.L,ul.L,[ul.z]),ul._15(4608,il.g,il.g,[rl.c]),ul._15(4608,il.i,il.i,[rl.c]),ul._15(135680,al.j,al.j,[al.a,al.h,al.i,al.c]),ul._15(6144,al.k,null,[al.j]),ul._15(4608,al.l,al.l,[al.k,al.a,al.f]),ul._15(4608,pn,pn,[al.l]),ul._15(512,rl.b,rl.b,[]),ul._15(1024,ul.l,il.q,[]),ul._15(1024,ul.b,function(n,l){return[il.r(n,l)]},[[2,il.h],[2,ul.y]]),ul._15(512,ul.c,ul.c,[[2,ul.b]]),ul._15(131584,ul._3,ul._3,[ul.z,ul.X,ul.r,ul.l,ul.i,ul.c]),ul._15(2048,ul.e,null,[ul._3]),ul._15(512,ul.d,ul.d,[ul.e]),ul._15(512,il.a,il.a,[[3,il.a]]),ul._15(131584,al.a,al.a,[]),ul._15(2048,al.g,null,[al.a]),ul._15(256,al.o,void 0,[]),ul._15(1024,al.c,al.s,[al.o]),ul._15(256,al.n,{tetris:V},[]),ul._15(2048,al.q,null,[al.n]),ul._15(1024,al.b,al.r,[ul.r,al.n,al.q]),ul._15(256,al.p,al.t,[]),ul._15(256,al.d,[],[]),ul._15(1024,al.e,al.u,[al.p,al.d]),ul._15(131584,al.f,al.f,[al.g,al.c,al.b,al.e]),ul._15(2048,al.h,null,[al.f]),ul._15(131584,al.i,al.i,[]),ul._15(512,al.m,al.m,[al.a,al.h,al.i]),ul._15(512,J,J,[])])}),cl=t("/oeL"),pl=t("fc+i");K.production&&Object(cl.R)(),Object(pl.j)().bootstrapModuleFactory(sl)},gFIY:function(n,l){function t(n){return new Promise(function(l,t){t(new Error("Cannot find module '"+n+"'."))})}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id="gFIY"}},[0]);